<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Clean Air in the Time of COVID</title>
  <meta name="description" content="These materials are for a 45 minute teaching demonstration oriented towards students in the new Masters in Environmental Data Science at UCSB." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Clean Air in the Time of COVID" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These materials are for a 45 minute teaching demonstration oriented towards students in the new Masters in Environmental Data Science at UCSB." />
  <meta name="github-repo" content="bbest/meds-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Clean Air in the Time of COVID" />
  
  <meta name="twitter:description" content="These materials are for a 45 minute teaching demonstration oriented towards students in the new Masters in Environmental Data Science at UCSB." />
  

<meta name="author" content="Ben Best, PhD" />


<meta name="date" content="2020-06-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="setup.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="style/style.css" type="text/css" />
<link rel="stylesheet" href="style/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MEDS demo</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i>Motivation</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#technologies"><i class="fa fa-check"></i>Technologies</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivating-use-case"><i class="fa fa-check"></i>Motivating Use Case</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="0.1" data-path="setup.html"><a href="setup.html#apply-for-accounts"><i class="fa fa-check"></i><b>0.1</b> Apply for accounts</a><ul>
<li class="chapter" data-level="0.1.1" data-path="setup.html"><a href="setup.html#google-earth-engine-gee-account"><i class="fa fa-check"></i><b>0.1.1</b> Google Earth Engine (GEE) account</a></li>
<li class="chapter" data-level="0.1.2" data-path="setup.html"><a href="setup.html#twitter-developer-account"><i class="fa fa-check"></i><b>0.1.2</b> Twitter developer account</a></li>
</ul></li>
<li class="chapter" data-level="0.2" data-path="setup.html"><a href="setup.html#install-software"><i class="fa fa-check"></i><b>0.2</b> Install software</a></li>
<li class="chapter" data-level="0.3" data-path="setup.html"><a href="setup.html#launch-rstudio"><i class="fa fa-check"></i><b>0.3</b> Launch RStudio</a></li>
<li class="chapter" data-level="0.4" data-path="setup.html"><a href="setup.html#fork-and-clone-the-github-repository"><i class="fa fa-check"></i><b>0.4</b> Fork and Clone the Github Repository</a></li>
<li class="chapter" data-level="0.5" data-path="setup.html"><a href="setup.html#install-r-packages"><i class="fa fa-check"></i><b>0.5</b> Install R Packages</a></li>
<li class="chapter" data-level="0.6" data-path="setup.html"><a href="setup.html#create-rmarkdown-file"><i class="fa fa-check"></i><b>0.6</b> Create Rmarkdown file</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="satellite.html"><a href="satellite.html"><i class="fa fa-check"></i><b>1</b> Satellite</a><ul>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#objectives"><i class="fa fa-check"></i>Objectives</a><ul>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#question"><i class="fa fa-check"></i>Question</a></li>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#study-area-delhi-india"><i class="fa fa-check"></i>Study area: Delhi, India</a></li>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#learning-outcomes"><i class="fa fa-check"></i>Learning outcomes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1.1" data-path="satellite.html"><a href="satellite.html#get-city-boundary"><i class="fa fa-check"></i><b>1.1</b> Get city boundary</a></li>
<li class="chapter" data-level="1.2" data-path="satellite.html"><a href="satellite.html#browse-datasets-tag-no2"><i class="fa fa-check"></i><b>1.2</b> Browse datasets, tag no2</a></li>
<li class="chapter" data-level="1.3" data-path="satellite.html"><a href="satellite.html#view-dataset-info"><i class="fa fa-check"></i><b>1.3</b> View dataset info</a></li>
<li class="chapter" data-level="1.4" data-path="satellite.html"><a href="satellite.html#questions"><i class="fa fa-check"></i><b>1.4</b> Questions</a><ul>
<li class="chapter" data-level="1.4.1" data-path="satellite.html"><a href="satellite.html#answers"><i class="fa fa-check"></i><b>1.4.1</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="satellite.html"><a href="satellite.html#launch-code-editor-with-dataset"><i class="fa fa-check"></i><b>1.5</b> Launch Code Editor with dataset</a></li>
<li class="chapter" data-level="1.6" data-path="satellite.html"><a href="satellite.html#run-the-initial-dataset-script"><i class="fa fa-check"></i><b>1.6</b> Run the initial dataset script</a></li>
<li class="chapter" data-level="1.7" data-path="satellite.html"><a href="satellite.html#modify-the-script-so-satellite-layer-is-semi-transparent"><i class="fa fa-check"></i><b>1.7</b> Modify the script so satellite layer is semi-transparent</a></li>
<li class="chapter" data-level="1.8" data-path="satellite.html"><a href="satellite.html#add-city-polygon-asset"><i class="fa fa-check"></i><b>1.8</b> Add city polygon asset</a></li>
<li class="chapter" data-level="1.9" data-path="satellite.html"><a href="satellite.html#add-to-city-to-map"><i class="fa fa-check"></i><b>1.9</b> Add to city to map</a></li>
<li class="chapter" data-level="1.10" data-path="satellite.html"><a href="satellite.html#create-time-series-chart"><i class="fa fa-check"></i><b>1.10</b> Create time series chart</a></li>
<li class="chapter" data-level="1.11" data-path="satellite.html"><a href="satellite.html#expand-dates-to-all-available"><i class="fa fa-check"></i><b>1.11</b> Expand dates to all available</a></li>
<li class="chapter" data-level="1.12" data-path="satellite.html"><a href="satellite.html#download-csv"><i class="fa fa-check"></i><b>1.12</b> Download CSV</a></li>
<li class="chapter" data-level="1.13" data-path="satellite.html"><a href="satellite.html#your-turn"><i class="fa fa-check"></i><b>1.13</b> Your Turn</a></li>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#conclusions"><i class="fa fa-check"></i>Conclusions</a></li>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#further-resources"><i class="fa fa-check"></i>Further Resources</a><ul>
<li class="chapter" data-level="" data-path="satellite.html"><a href="satellite.html#google-earth-engine"><i class="fa fa-check"></i>Google Earth Engine</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sentiment.html"><a href="sentiment.html"><i class="fa fa-check"></i><b>2</b> Sentiment</a><ul>
<li class="chapter" data-level="" data-path="sentiment.html"><a href="sentiment.html#objectives-1"><i class="fa fa-check"></i>Objectives</a><ul>
<li class="chapter" data-level="" data-path="sentiment.html"><a href="sentiment.html#question-1"><i class="fa fa-check"></i>Question</a></li>
<li class="chapter" data-level="" data-path="sentiment.html"><a href="sentiment.html#technical-motivation"><i class="fa fa-check"></i>Technical Motivation</a></li>
<li class="chapter" data-level="" data-path="sentiment.html"><a href="sentiment.html#approach"><i class="fa fa-check"></i>Approach</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sentiment.html"><a href="sentiment.html#prerequisites-2"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="2.1" data-path="sentiment.html"><a href="sentiment.html#load-r-packages"><i class="fa fa-check"></i><b>2.1</b> Load R packages</a></li>
<li class="chapter" data-level="2.2" data-path="sentiment.html"><a href="sentiment.html#setup-twitter"><i class="fa fa-check"></i><b>2.2</b> Setup Twitter</a></li>
<li class="chapter" data-level="2.3" data-path="sentiment.html"><a href="sentiment.html#define-queries-for-air-quality-and-clean-energy"><i class="fa fa-check"></i><b>2.3</b> Define queries for air quality and clean energy</a></li>
<li class="chapter" data-level="2.4" data-path="sentiment.html"><a href="sentiment.html#define-spatial-and-temporal-extent"><i class="fa fa-check"></i><b>2.4</b> Define spatial and temporal extent</a></li>
<li class="chapter" data-level="2.5" data-path="sentiment.html"><a href="sentiment.html#get-tweets-iterating-over-queries-months"><i class="fa fa-check"></i><b>2.5</b> Get tweets, iterating over queries &amp; months</a></li>
<li class="chapter" data-level="2.6" data-path="sentiment.html"><a href="sentiment.html#classify-sentiment-of-tweets-over-time-using-lexicon"><i class="fa fa-check"></i><b>2.6</b> Classify sentiment of tweets over time, using lexicon</a></li>
<li class="chapter" data-level="2.7" data-path="sentiment.html"><a href="sentiment.html#twitter-sentiment140-dataset"><i class="fa fa-check"></i><b>2.7</b> Twitter Sentiment140 dataset</a></li>
<li class="chapter" data-level="2.8" data-path="sentiment.html"><a href="sentiment.html#train-tensorflow-model-with-sentiment140"><i class="fa fa-check"></i><b>2.8</b> Train TensorFlow model with Sentiment140</a></li>
<li class="chapter" data-level="2.9" data-path="sentiment.html"><a href="sentiment.html#classify-sentiment-of-tweets-over-time-using-tensorflow"><i class="fa fa-check"></i><b>2.9</b> Classify sentiment of tweets over time, using TensorFlow</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="integration.html"><a href="integration.html"><i class="fa fa-check"></i><b>3</b> Integration</a><ul>
<li class="chapter" data-level="3.1" data-path="integration.html"><a href="integration.html#time-series-plot-of-satellite-sentiment-metrics"><i class="fa fa-check"></i><b>3.1</b> Time series plot of satellite &amp; sentiment metrics</a></li>
<li class="chapter" data-level="3.2" data-path="integration.html"><a href="integration.html#box-plot-of-satellite-sentiment-metrics-beforeafter-lockdown"><i class="fa fa-check"></i><b>3.2</b> Box plot of satellite &amp; sentiment metrics before/after lockdown</a></li>
<li class="chapter" data-level="" data-path="integration.html"><a href="integration.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Clean Air in the Time of COVID</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Clean Air in the Time of COVID</h1>
<h2 class="subtitle"><em>Use Cases for Satellite &amp; Sentiment Analysis</em></h2>
<p class="author"><em>Ben Best, PhD</em></p>
<p class="date"><em>2020-06-02</em></p>
</div>
<div id="overview" class="section level1 unnumbered">
<h1>Overview</h1>
<p>These materials are for a 45 minute teaching demonstration that was on 2020-05-26 oriented towards students in the new Masters in Environmental Data Science at UCSB.</p>
<div id="motivation" class="section level2 unnumbered objectives">
<h2>Motivation</h2>
<p>This is an exciting time for the emerging field of Environmental Data Science. Environmental problems are increasingly complex and require advanced technical skills to translate the ever expanding flow of data into actionable insights.</p>
<div id="technologies" class="section level3 unnumbered">
<h3>Technologies</h3>
<p>The two specific technologies featured in this teaching demonstration highlight a couple of the most promising techniques to demonstrate big data and machine learning:</p>
<ul>
<li><p><strong>BIG DATA: Google Earth Engine (satellite)</strong> leverages the massive storage and computational capabilities of the Google Cloud to analyze petabytes of the publicly available satellite data. For instance, global climatologies averaging across 40 years of temperature can be calculated and mapped in seconds. This is a truly <em>big data</em> platform!</p></li>
<li><p><strong>MACHINE LEARNING: TensorFlow (sentiment)</strong> is the machine learning software made open-source by Google. It is the most commonly used software for audio, text and image analysis. More specifically tensorflow allows construction of <em>convolutional neural networks</em>, which represent a layering of nodes to enable complex pattern matching. These <em>deep learning</em> models have been popularized by their ability to beat the best human at the most complex game of Go, self-drive vehicles, Netflix recommendations, Spotify playlists and respond to your beck and call through Alexa’s voice commands.</p></li>
</ul>
</div>
<div id="motivating-use-case" class="section level3 unnumbered">
<h3>Motivating Use Case</h3>
<p>The improvement in air quality since COVID-19 lockdown was newsworthy. This lab uses cutting edge environmental data science tools to evaluate the physical description and social reaction of this natural experiment.</p>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
For the first time in decades, Mount Everest was visible from Kathmandu due to improved air quality.
</p>
<p>
<a href="https://t.co/n4kLw1OwcW"><img src="https://pbs.twimg.com/media/EYjPQBUXgAAbZwW?format=jpg&name=thumb"/></a>
</p>
— Tom Patterson (@MtnMapper) <a href="https://twitter.com/MtnMapper/status/1263487780799184897?ref_src=twsrc%5Etfw">May 21, 2020</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
The positive effect of the Lockdown in India’s environment can be seen in New Delhi.<br>This picture depicts the air quality of New Delhi before &amp; after Lockdown.<br>Source - <a href="https://t.co/VoG0UbpFzE">https://t.co/VoG0UbpFzE</a>
</p>
<p>
<a href="https://t.co/FKlz93coJr"><img src="https://pbs.twimg.com/media/EWRq2NHX0AAuhMY?format=png&name=thumb"/></a>
</p>
— GurumaujSatsangi (@GurumaujS) <a href="https://twitter.com/GurumaujS/status/1253244126239379457?ref_src=twsrc%5Etfw">April 23, 2020</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
</div>
<div id="prerequisites" class="section level2 unnumbered prereq">
<h2>Prerequisites</h2>
<p>See the Setup for required software. For this demonstration to make the most sense, it’s preferable that you’re familiar with:</p>
<ul>
<li><strong>R</strong></li>
<li><strong>GIS</strong></li>
</ul>

</div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/lesson.js"></script>
            </section>

          </div>
        </div>
      </div>

<a href="setup.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ecoquants/r3-workshop/blob/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["MEDS-demo.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
